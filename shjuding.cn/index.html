<!DOCTYPE html>
<html>
<head>
<title>数钜宝收益演算器</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript">
function refund(source,rate,sumup){return day==0?0:(source-sumup)*rate}function getSource(){return $('input[name="source"]').val()}function getSourceRate(){var sourcerate=$('input[name="sourcerate"]').val();return(sourcerate.indexOf('%')!=-1)?sourcerate.replace(/%/g,'')/100:sourcerate}function getRefundRate(){var sourcerate=$('input[name="daily"]').val();return(sourcerate.indexOf('%')!=-1)?sourcerate.replace(/%/g,'')/100:sourcerate}function getPaid(take=1){var ex=$('input[name="extra"]').val();return(take==1)?(getSource()*getSourceRate()):(parseInt(ex?ex:0)+getSource()*getSourceRate())}$(document).ready(function(){$('input[name="source"], input[name="sourcerate"]').change(function(){$('input[name="paid"]').val(getSource()*getSourceRate());$('input[name="total"]').val(getSource() * (1 + getSourceRate()));});$('input.calculate').click(function(){var refundString='<table border="1"><thead><tr><td>天数</td><td>返现</td><td>小计</td></tr></thead><tbody>';var day=0,rfd=0,sumup=0,source=getSource(),refundrate=getRefundRate();if(!source||!refundrate){$('div.refund_table,label.days').html('');return false;}while(sumup<=getPaid(0)&&rfd>=0&&day<=200){day++;rfd=(source-sumup+getPaid(1))*refundrate;sumup+=rfd;refundString+='<tr><td>'+day+'</td><td>'+rfd+'</td><td>'+sumup+'</td></tr>'}$('label.days').html('预计<span>'+day+'</span>天回本，返现明细如下：');refundString+='</tbody></table>';$('div.refund_table').html(refundString)})});
</script>
<style type="text/css">
*{font-size:14px;}table{border-collapse:collapse;border:1px solid #9A9A9A;}table tr td{padding:5px 10px 5px 20px;font-family:monospace;}.days span{color:red;font-weight:bold;}.field{height:30px;line-height:30px;}input{margin:0 20px 0 0;}input[readonly]{border:none;}.left{float:left;}.calculate{width:100px;height:30px;vertical-align:middle;background-color:rgb(54, 156, 238);color:white;}
</style>
</head>

<body>
    <div>
        <div class="field">
            <label>税票金额</label>
            <input type="text" size="20" name="source" />
        </div>
        <div class="field left">
            <label>采集费比率</label>
            <input type="text" name="sourcerate" size="6" value="9%" />
        </div>
        <div class="field left">
            <label>采集费</label>
            <input type="text" name="paid" size="16" readonly />
        </div>
        <div class="field">
            <label style="color:red;">总积分</label>
            <input type="text" name="total" size="20" readonly />
        </div>
        <div class="field">
            <label>中心代和个人采集者成本</label>
            <input type="text" name="extra" size="10" value="0" />
        </div>
        <div class="field">
            <label>返现日利率</label>
            <input type="text" name="daily" size="6" value="0.08%" />
        </div>
        <input type="button" class="calculate" value="计算" />
        <div>
            <label class="days"></label>
            <div class="refund_table">
            </div>
        </div>
    </div>
</body>

</html>
